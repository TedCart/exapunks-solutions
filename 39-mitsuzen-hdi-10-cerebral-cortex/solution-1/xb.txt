;REC_BOT LOCAL
MAKE;400
COPY M T
MULI T 2 X
MARK WAITFORTICKETS
SUBI T 1 T
TJMP WAITFORTICKETS
KILL;TICKET_GIVER_BOT
MODE;SWITCH TO GLOBAL
REPL SENDBOT
MARK LOOP
COPY M F
JUMP LOOP

MARK SENDBOT
COPY X T
MARK WAITFORRECBOT
SUBI T 1 T
TJMP WAITFORRECBOT
KILL;REC_BOT
REPL ORGBOT
GRAB 400

MARK SENDHOSTS
COPY F M
SEEK -1
COPY F M
SEEK 1
TEST EOF
FJMP SENDHOSTS

COPY M X;GET MAX HOST
SEEK -9999
;FIND MAX HOST
MARK SEARCHLOOP
TEST X = F
SEEK 1
FJMP SEARCHLOOP
SEEK -1
COPY F M;SEND #NERV
SEEK -2
VOID F;DELETE MAX HOST
VOID F;DELETE #NERV
SEEK -9999
TEST EOF
FJMP SENDHOSTS

KILL
HALT



MARK ORGBOT
MAKE
MARK RECLOOP
COPY M X
VOID M
NOOP
MARK RLOOP
NOOP
NOOP
NOOP
TEST MRD
FJMP RECDONE
TEST M < X
TJMP NEWMIN
VOID M
JUMP RLOOP
MARK NEWMIN
COPY M X
JUMP RLOOP

MARK RECDONE
COPY X M;SEND MAX HOST
COPY X F;WRITE HOST
COPY M F;WRITE #NERV
JUMP RECLOOP
